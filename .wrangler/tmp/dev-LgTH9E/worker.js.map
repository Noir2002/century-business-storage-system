{
  "version": 3,
  "sources": ["../../../worker.js", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-w50aTT/middleware-insertion-facade.js", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-w50aTT/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\xiaol\\Desktop\\layui\\.wrangler\\tmp\\dev-LgTH9E",
  "sourcesContent": ["// \u7B80\u5316\u7684Cloudflare Workers - \u4E13\u6CE8\u4E8EExcel\u6587\u4EF6\u4E0A\u4F20\u5230R2\r\n// \u8F7B\u91CF\u7EA7\u5185\u5B58\u7F13\u5B58\uFF1A\u7528\u4E8E\u5728\u540C\u4E00 Worker \u5B9E\u4F8B\u4E2D\u6682\u5B58\u201C\u5BBD\u8868\u201D\u6570\u636E\uFF0C\u4FBF\u4E8E\u4E0A\u4F20\u540E\u5373\u65F6\u5237\u65B0\r\nlet wideTableCache = [];\r\nlet recordsCache = [];\r\nlet tmallWideCache = [];\r\nconst WIDE_TABLE_R2_KEY = 'wide/latest.json';\r\nconst RECORDS_R2_KEY = 'records/latest.json';\r\nconst TMALL_WIDE_R2_KEY = 'tmall/wide.json';\r\n\r\n// \u5DE5\u5177\uFF1A\u83B7\u53D6\u65E5\u671F\u952E\uFF08YYYY-MM-DD\uFF09\r\nfunction getDateKeysFromRow(row) {\r\n  return Object.keys(row || {}).filter(k => /^\\d{4}-\\d{2}-\\d{2}$/.test(k));\r\n}\r\nfunction formatYMD(d) {\r\n  const y = d.getFullYear();\r\n  const m = String(d.getMonth()+1).padStart(2,'0');\r\n  const day = String(d.getDate()).padStart(2,'0');\r\n  return `${y}-${m}-${day}`;\r\n}\r\n// \u5C06\u8D85\u8FC7\u6700\u8FD1N\u5929\u7684\u6570\u636E\u4ECE\u5BBD\u8868\u5F52\u6863\u5230\u884C\u8BB0\u5F55\r\nasync function archiveOldDatesToRecords(env, keepDays = 5) {\r\n  // \u5173\u95ED\u81EA\u52A8\u5F52\u6863\uFF1A\u82E5\u672A\u663E\u5F0F\u914D\u7F6E ARCHIVE_KEEP_DAYS\uFF0C\u5219\u4E0D\u505A\u5F52\u6863\r\n  const configured = env && env.ARCHIVE_KEEP_DAYS !== undefined && env.ARCHIVE_KEEP_DAYS !== null;\r\n  const effectiveKeepDays = configured ? parseInt(env.ARCHIVE_KEEP_DAYS) || 0 : 0;\r\n  if (effectiveKeepDays <= 0) return;\r\n  keepDays = effectiveKeepDays;\r\n  if (!Array.isArray(wideTableCache) || wideTableCache.length === 0) return;\r\n  const today = new Date();\r\n  const keepSet = new Set(Array.from({length: keepDays}, (_,i)=>{\r\n    const d = new Date(today); d.setDate(today.getDate()-i); return formatYMD(d);\r\n  }));\r\n  let archived = [];\r\n  wideTableCache.forEach(row => {\r\n    const dateKeys = getDateKeysFromRow(row);\r\n    dateKeys.forEach(k => {\r\n      if (!keepSet.has(k)) {\r\n        const stock = parseInt(row[k]||0) || 0;\r\n        const rec = {\r\n          id: Date.now() + Math.floor(Math.random()*1e6),\r\n          SKU: row.SKU || '',\r\n          '\u4EA7\u54C1\u4E2D\u6587\u540D': row['\u4EA7\u54C1\u4E2D\u6587\u540D'] || '',\r\n          '\u7F51\u9875\u94FE\u63A5': row['\u7F51\u9875\u94FE\u63A5'] || '',\r\n          '\u521D\u59CB\u5E93\u5B58': row['\u521D\u59CB\u5E93\u5B58'] || 0,\r\n          '\u65E5\u671F': `${k} 00:00`,\r\n          '\u5E93\u5B58': stock,\r\n          '\u9500\u91CF': row[k + '_\u9500\u91CF'] != null ? parseInt(row[k + '_\u9500\u91CF']) || 0 : 0\r\n        };\r\n        archived.push(rec);\r\n        delete row[k];\r\n        delete row[k + '_\u9500\u91CF'];\r\n      }\r\n    });\r\n  });\r\n  if (archived.length) {\r\n    if (!Array.isArray(recordsCache)) recordsCache = [];\r\n    // \u65B0\u5F52\u6863\u7684\u653E\u5230\u6700\u524D\u9762\r\n    recordsCache = [...archived, ...recordsCache];\r\n    // \u6301\u4E45\u5316\u4E24\u4EFD\u6570\u636E\r\n    if (env && env.R2_BUCKET) {\r\n      try {\r\n        await env.R2_BUCKET.put(WIDE_TABLE_R2_KEY, JSON.stringify(wideTableCache), { httpMetadata: { contentType: 'application/json' } });\r\n        await env.R2_BUCKET.put(RECORDS_R2_KEY, JSON.stringify(recordsCache), { httpMetadata: { contentType: 'application/json' } });\r\n      } catch (e) { console.warn('\u5F52\u6863\u6301\u4E45\u5316\u5931\u8D25:', e); }\r\n    }\r\n  }\r\n}\r\n\r\n// \u8BA1\u7B97\u9500\u91CF\uFF1A\u6839\u636E\u201C\u521D\u59CB\u5E93\u5B58\u201D\u548C\u5404\u65E5\u671F\u5E93\u5B58\u5217\u8BA1\u7B97 \u201C\u65E5\u671F_\u9500\u91CF\u201D \u5217\r\nfunction computeSalesForWideTableRows(rows) {\r\n  if (!Array.isArray(rows)) return rows;\r\n  return rows.map(row => {\r\n    const dateKeys = getDateKeysFromRow(row).sort();\r\n    if (dateKeys.length === 0) return row;\r\n    const initial = parseInt(row['\u521D\u59CB\u5E93\u5B58'] || 0) || 0;\r\n    let prevStock = initial;\r\n    dateKeys.forEach((k, idx) => {\r\n      const currStock = parseInt(row[k] || 0) || 0;\r\n      let sales = 0;\r\n      if (idx === 0) {\r\n        sales = Math.max(0, prevStock - currStock);\r\n      } else {\r\n        sales = Math.max(0, prevStock - currStock);\r\n      }\r\n      row[k + '_\u9500\u91CF'] = sales;\r\n      prevStock = currStock;\r\n    });\r\n    return row;\r\n  });\r\n}\r\nexport default {\r\n  async fetch(request, env, ctx) {\r\n    const url = new URL(request.url);\r\n    const path = url.pathname;\r\n    const method = request.method;\r\n\r\n    // CORS\u5934\r\n    const corsHeaders = {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n    };\r\n\r\n    // \u5904\u7406CORS\u9884\u68C0\u8BF7\u6C42\r\n    if (method === 'OPTIONS') {\r\n      return new Response(null, {\r\n        status: 200,\r\n        headers: corsHeaders\r\n      });\r\n    }\r\n\r\n    try {\r\n      // \u8DEF\u7531\u5904\u7406\uFF1A\u4EC5\u5F53 /api/ \u524D\u7F00\u65F6\u8FDB\u5165 API \u5206\u53D1\r\n      if (path.startsWith('/api/')) {\r\n        if (path === '/api/health' && (method === 'GET' || method === 'HEAD')) {\r\n          return Response.json({ success: true, service: 'worker', time: new Date().toISOString() }, { headers: corsHeaders });\r\n        } else if (path === '/api/files/upload' && method === 'POST') {\r\n          return await handleExcelUpload(request, env, corsHeaders);\r\n        } else if (path === '/api/files' && method === 'GET') {\r\n          return await handleFilesList(request, env, corsHeaders);\r\n        } else if (path === '/api/files/presigned-url' && method === 'POST') {\r\n          return await handlePresignedUrl(request, env, corsHeaders);\r\n        } else if (path === '/api/files/parse' && method === 'POST') {\r\n          return await handleExcelParse(request, env, corsHeaders);\r\n        } else if (path.startsWith('/api/files/') && method === 'GET' && path.endsWith('/download')) {\r\n          return await handleFileDownload(request, env, path, corsHeaders);\r\n        } else if (path.startsWith('/api/files/') && method === 'GET' && path.endsWith('/analyze')) {\r\n          return await handleFileAnalyze(request, env, path, corsHeaders);\r\n        } else if (path.startsWith('/api/inventory/')) {\r\n          return await handleInventoryData(request, env, path, method, corsHeaders);\r\n        } else if (path.startsWith('/api/analytics/')) {\r\n          return await handleAnalyticsData(request, env, path, method, corsHeaders);\r\n        } else if (path.startsWith('/api/localdb/')) {\r\n          return await handleLocalDB(request, env, path, method, corsHeaders);\r\n        } else if (path.startsWith('/api/tmall-orders/')) {\r\n          return await handleTmallOrders(request, env, path, method, corsHeaders);\r\n        } else if (path.startsWith('/api/r2/')) {\r\n          return await handleR2Routes(request, env, path, method, corsHeaders);\r\n        } else if (path.startsWith('/api/package-sync/')) {\r\n          return await handlePackageSync(request, env, path, method, corsHeaders);\r\n        } else {\r\n          return new Response('Not Found', { status: 404, headers: corsHeaders });\r\n        }\r\n      }\r\n\r\n      // \u975E /api/ \u7684\u8BF7\u6C42\uFF0C\u4EA4\u7ED9\u9759\u6001\u8D44\u4EA7\uFF08Sites\uFF09\uFF0C\u540C\u65F6\u8865\u5145CORS\u54CD\u5E94\u5934\r\n      if (env.ASSETS && env.ASSETS.fetch) {\r\n        const resp = await env.ASSETS.fetch(request);\r\n        const headers = new Headers(resp.headers);\r\n        headers.set('Access-Control-Allow-Origin', '*');\r\n        headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\r\n        headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');\r\n        return new Response(resp.body, { status: resp.status, statusText: resp.statusText, headers });\r\n      }\r\n\r\n      // \u515C\u5E95\r\n      return new Response('Not Found', { status: 404, headers: corsHeaders });\r\n    } catch (error) {\r\n      console.error('Worker Error:', error);\r\n      return new Response(JSON.stringify({ \r\n        success: false, \r\n        error: error.message \r\n      }), {\r\n        status: 500,\r\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\n// \u5904\u7406Excel\u6587\u4EF6\u4E0A\u4F20\r\nasync function handleExcelUpload(request, env, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406Excel\u6587\u4EF6\u4E0A\u4F20...');\r\n  \r\n  try {\r\n    const formData = await request.formData();\r\n    const file = formData.get('file');\r\n    const description = formData.get('description') || '';\r\n    \r\n    if (!file) {\r\n      return Response.json({\r\n        success: false,\r\n        error: '\u6CA1\u6709\u4E0A\u4F20\u6587\u4EF6'\r\n      }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u9A8C\u8BC1\u6587\u4EF6\u7C7B\u578B\r\n    if (!isExcelFile(file)) {\r\n      return Response.json({\r\n        success: false,\r\n        error: '\u53EA\u652F\u6301Excel\u6587\u4EF6(.xlsx, .xls)'\r\n      }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u751F\u6210\u6587\u4EF6\u540D\r\n    const timestamp = Date.now();\r\n    const randomSuffix = Math.round(Math.random() * 1E9);\r\n    const fileExtension = getFileExtension(file.name);\r\n    const fileName = `${timestamp}-${randomSuffix}.${fileExtension}`;\r\n    const filePath = `arc/${fileName}`;\r\n    \r\n    console.log(`\uD83D\uDCC1 \u4E0A\u4F20\u6587\u4EF6\u8DEF\u5F84: ${filePath}`);\r\n\r\n    // \u4E0A\u4F20\u5230R2\r\n    if (env.R2_BUCKET) {\r\n      console.log('\uD83D\uDCE6 \u4F7F\u7528R2 Bucket\u4E0A\u4F20...');\r\n      await env.R2_BUCKET.put(filePath, file.stream(), {\r\n        httpMetadata: {\r\n          contentType: file.type || 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        },\r\n        customMetadata: {\r\n          originalName: file.name,\r\n          uploadTime: new Date().toISOString(),\r\n          description: description\r\n        }\r\n      });\r\n    } else {\r\n      throw new Error('R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528');\r\n    }\r\n    \r\n    // \u6784\u5EFA\u6587\u4EF6\u4FE1\u606F\r\n    const fileInfo = {\r\n      id: timestamp,\r\n      originalName: file.name,\r\n      fileName: fileName,\r\n      size: file.size,\r\n      uploadTime: new Date().toISOString(),\r\n      uploadedBy: 'admin',\r\n      description: description,\r\n      r2Path: filePath,\r\n      publicUrl: `https://23441d4f7734b84186c4c20ddefef8e7.r2.cloudflarestorage.com/century-business-system/${filePath}`\r\n    };\r\n    \r\n    console.log('\u2705 \u6587\u4EF6\u4E0A\u4F20\u6210\u529F:', fileInfo);\r\n    \r\n    return Response.json({\r\n      success: true,\r\n      message: '\u6587\u4EF6\u4E0A\u4F20\u6210\u529F',\r\n      file: fileInfo\r\n    }, { headers: corsHeaders });\r\n    \r\n  } catch (error) {\r\n    console.error('\u274C \u6587\u4EF6\u4E0A\u4F20\u5931\u8D25:', error);\r\n    return Response.json({\r\n      success: false,\r\n      error: `\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25: ${error.message}`\r\n    }, { \r\n      status: 500,\r\n      headers: corsHeaders \r\n    });\r\n  }\r\n}\r\n\r\n// \u83B7\u53D6\u6587\u4EF6\u5217\u8868\r\nasync function handleFilesList(request, env, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u83B7\u53D6\u6587\u4EF6\u5217\u8868...');\r\n  \r\n  try {\r\n    if (env.R2_BUCKET) {\r\n      const objects = await env.R2_BUCKET.list({ prefix: 'arc/' });\r\n      const files = objects.objects.map((obj, index) => ({\r\n        id: index + 1,\r\n        originalName: obj.customMetadata?.originalName || obj.key.replace('arc/', ''),\r\n        fileName: obj.key.replace('arc/', ''),\r\n        size: obj.size || 0,\r\n        uploadTime: obj.customMetadata?.uploadTime || obj.uploaded || new Date().toISOString(),\r\n        uploadedBy: 'admin',\r\n        description: obj.customMetadata?.description || '',\r\n        r2Path: obj.key,\r\n        publicUrl: `https://23441d4f7734b84186c4c20ddefef8e7.r2.cloudflarestorage.com/century-business-system/${obj.key}`\r\n      }));\r\n      \r\n      console.log(`\u2705 \u627E\u5230 ${files.length} \u4E2A\u6587\u4EF6`);\r\n      \r\n      return Response.json({ \r\n        success: true, \r\n        files: files \r\n      }, { headers: corsHeaders });\r\n    } else {\r\n      throw new Error('R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528');\r\n    }\r\n  } catch (error) {\r\n    console.error('\u274C \u83B7\u53D6\u6587\u4EF6\u5217\u8868\u5931\u8D25:', error);\r\n    \r\n    // \u56DE\u9000\u5230\u7A7A\u5217\u8868\r\n    return Response.json({ \r\n      success: true, \r\n      files: [],\r\n      message: '\u6587\u4EF6\u5217\u8868\u4E3A\u7A7A\u6216\u83B7\u53D6\u5931\u8D25'\r\n    }, { headers: corsHeaders });\r\n  }\r\n}\r\n\r\n// \u9A8C\u8BC1Excel\u6587\u4EF6\r\nfunction isExcelFile(file) {\r\n  const allowedTypes = [\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\r\n    'application/vnd.ms-excel', // .xls\r\n    'application/excel',\r\n    'application/x-excel'\r\n  ];\r\n  \r\n  const allowedExtensions = ['.xlsx', '.xls'];\r\n  const fileName = file.name.toLowerCase();\r\n  \r\n  return allowedTypes.includes(file.type) || \r\n         allowedExtensions.some(ext => fileName.endsWith(ext));\r\n}\r\n\r\n// \u76F4\u63A5\u901A\u8FC7Workers\u5904\u7406\u6587\u4EF6\u4E0A\u4F20 - \u89E3\u51B3CORS\u95EE\u9898\u7684\u6700\u7B80\u5355\u65B9\u6CD5\r\nasync function handlePresignedUrl(request, env, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406\u6587\u4EF6\u4E0A\u4F20\u8BF7\u6C42...');\r\n  \r\n  try {\r\n    const formData = await request.formData();\r\n    const file = formData.get('file');\r\n    const originalFileName = formData.get('fileName') || file.name;\r\n    \r\n    if (!file) {\r\n      return Response.json({\r\n        success: false,\r\n        error: '\u6CA1\u6709\u4E0A\u4F20\u6587\u4EF6'\r\n      }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u9A8C\u8BC1\u6587\u4EF6\u7C7B\u578B\r\n    if (!isExcelFile(file)) {\r\n      return Response.json({\r\n        success: false,\r\n        error: '\u53EA\u652F\u6301Excel\u6587\u4EF6(.xlsx, .xls)'\r\n      }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u751F\u6210\u6587\u4EF6\u8DEF\u5F84\r\n    const timestamp = Date.now();\r\n    const randomSuffix = Math.round(Math.random() * 1E9);\r\n    const fileExtension = getFileExtension(originalFileName);\r\n    const newFileName = `${timestamp}-${randomSuffix}.${fileExtension}`;\r\n    const filePath = `arc/${newFileName}`;\r\n    \r\n    console.log(`\uD83D\uDCC1 \u4E0A\u4F20\u6587\u4EF6\u5230: ${filePath}`);\r\n\r\n    if (env.R2_BUCKET) {\r\n      // 1. \u5148\u89E3\u6790Excel\u6587\u4EF6\u5185\u5BB9\r\n      const arrayBuffer = await file.arrayBuffer();\r\n      const excelData = parseExcelData(arrayBuffer);\r\n      \r\n      // 2. \u5B58\u50A8\u89E3\u6790\u540E\u7684\u6570\u636E\u5230\u672C\u5730\u7F13\u5B58\uFF08\u4F7F\u7528KV\u6216\u8005\u7B80\u5355\u5B58\u50A8\uFF09\r\n      const dataKey = `excel_data_${timestamp}`;\r\n      // \u8FD9\u91CC\u5E94\u8BE5\u5B58\u50A8\u5230KV\uFF0C\u4F46\u6682\u65F6\u6A21\u62DF\u5B58\u50A8\r\n      \r\n      // 3. \u7136\u540E\u4E0A\u4F20\u539F\u6587\u4EF6\u5230R2\r\n      await env.R2_BUCKET.put(filePath, file.stream(), {\r\n        httpMetadata: {\r\n          contentType: file.type || 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        },\r\n        customMetadata: {\r\n          originalName: originalFileName,\r\n          uploadTime: new Date().toISOString(),\r\n          dataKey: dataKey,\r\n          parsedRows: excelData.length\r\n        }\r\n      });\r\n      \r\n      return Response.json({\r\n        success: true,\r\n        filePath: filePath,\r\n        newFileName: newFileName,\r\n        originalName: originalFileName,\r\n        size: file.size,\r\n        uploadTime: new Date().toISOString(),\r\n        publicUrl: `https://23441d4f7734b84186c4c20ddefef8e7.r2.cloudflarestorage.com/century-business-system/${filePath}`\r\n      }, { headers: corsHeaders });\r\n    } else {\r\n      throw new Error('R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('\u274C \u6587\u4EF6\u4E0A\u4F20\u5931\u8D25:', error);\r\n    return Response.json({\r\n      success: false,\r\n      error: `\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25: ${error.message}`\r\n    }, { \r\n      status: 500,\r\n      headers: corsHeaders \r\n    });\r\n  }\r\n}\r\n\r\n// \u9A8C\u8BC1Excel\u6587\u4EF6\u7C7B\u578B\r\nfunction isExcelFileType(fileType, fileName) {\r\n  const allowedTypes = [\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\r\n    'application/vnd.ms-excel', // .xls\r\n    'application/excel',\r\n    'application/x-excel'\r\n  ];\r\n  \r\n  const allowedExtensions = ['.xlsx', '.xls'];\r\n  const fileNameLower = fileName.toLowerCase();\r\n  \r\n  return allowedTypes.includes(fileType) || \r\n         allowedExtensions.some(ext => fileNameLower.endsWith(ext));\r\n}\r\n\r\n// Excel\u6587\u4EF6\u89E3\u6790API\r\nasync function handleExcelParse(request, env, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u89E3\u6790Excel\u6587\u4EF6...');\r\n  \r\n  try {\r\n    const body = await request.json();\r\n    const { filePath } = body;\r\n    \r\n    if (!filePath) {\r\n      return Response.json({\r\n        success: false,\r\n        error: '\u6587\u4EF6\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A'\r\n      }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u4ECER2\u83B7\u53D6\u6587\u4EF6\r\n    if (env.R2_BUCKET) {\r\n      const object = await env.R2_BUCKET.get(filePath);\r\n      \r\n      if (!object) {\r\n        return Response.json({\r\n          success: false,\r\n          error: '\u6587\u4EF6\u4E0D\u5B58\u5728'\r\n        }, { headers: corsHeaders });\r\n      }\r\n\r\n      // \u6A21\u62DFExcel\u89E3\u6790 - \u5728\u5B9E\u9645\u73AF\u5883\u4E2D\u53EF\u4EE5\u4F7F\u7528XLSX\u5E93\r\n      const mockData = generateMockInventoryData();\r\n      \r\n      // \u5B58\u50A8\u89E3\u6790\u540E\u7684\u6570\u636E\u5230\u6A21\u62DF\u6570\u636E\u5E93\r\n      const dataKey = `excel_data_${Date.now()}`;\r\n      \r\n      return Response.json({\r\n        success: true,\r\n        dataKey: dataKey,\r\n        rows: mockData.length,\r\n        columns: Object.keys(mockData[0] || {}).length,\r\n        preview: mockData.slice(0, 5), // \u524D5\u884C\u9884\u89C8\r\n        message: 'Excel\u6587\u4EF6\u89E3\u6790\u6210\u529F'\r\n      }, { headers: corsHeaders });\r\n    } else {\r\n      throw new Error('R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('\u274C Excel\u89E3\u6790\u5931\u8D25:', error);\r\n    return Response.json({\r\n      success: false,\r\n      error: `Excel\u89E3\u6790\u5931\u8D25: ${error.message}`\r\n    }, { \r\n      status: 500,\r\n      headers: corsHeaders \r\n    });\r\n  }\r\n}\r\n\r\n// \u5E93\u5B58\u6570\u636EAPI\r\nasync function handleInventoryData(request, env, path, method, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406\u5E93\u5B58\u6570\u636E\u8BF7\u6C42:', path);\r\n  \r\n  if (path === '/api/inventory/data' && method === 'GET') {\r\n    // \u83B7\u53D6\u5E93\u5B58\u6570\u636E\r\n    const mockData = generateMockInventoryData();\r\n    \r\n    return Response.json({\r\n      success: true,\r\n      data: mockData,\r\n      total: mockData.length,\r\n      message: '\u5E93\u5B58\u6570\u636E\u83B7\u53D6\u6210\u529F'\r\n    }, { headers: corsHeaders });\r\n  } else if (path === '/api/inventory/summary' && method === 'GET') {\r\n    // \u83B7\u53D6\u5E93\u5B58\u6C47\u603B\r\n    const mockData = generateMockInventoryData();\r\n    const summary = calculateInventorySummary(mockData);\r\n    \r\n    return Response.json({\r\n      success: true,\r\n      summary: summary,\r\n      message: '\u5E93\u5B58\u6C47\u603B\u8BA1\u7B97\u6210\u529F'\r\n    }, { headers: corsHeaders });\r\n  }\r\n  \r\n  return Response.json({\r\n    success: false,\r\n    error: '\u4E0D\u652F\u6301\u7684\u5E93\u5B58API'\r\n  }, { status: 404, headers: corsHeaders });\r\n}\r\n\r\n// \u6570\u636E\u5206\u6790API\r\nasync function handleAnalyticsData(request, env, path, method, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406\u6570\u636E\u5206\u6790\u8BF7\u6C42:', path);\r\n  \r\n  if (path === '/api/analytics/sales' && method === 'GET') {\r\n    // \u9500\u552E\u5206\u6790\r\n    const salesAnalysis = generateSalesAnalysis();\r\n    \r\n    return Response.json({\r\n      success: true,\r\n      analysis: salesAnalysis,\r\n      message: '\u9500\u552E\u5206\u6790\u5B8C\u6210'\r\n    }, { headers: corsHeaders });\r\n  } else if (path === '/api/analytics/trends' && method === 'GET') {\r\n    // \u8D8B\u52BF\u5206\u6790\r\n    const trendsAnalysis = generateTrendsAnalysis();\r\n    \r\n    return Response.json({\r\n      success: true,\r\n      trends: trendsAnalysis,\r\n      message: '\u8D8B\u52BF\u5206\u6790\u5B8C\u6210'\r\n    }, { headers: corsHeaders });\r\n  }\r\n  \r\n  return Response.json({\r\n    success: false,\r\n    error: '\u4E0D\u652F\u6301\u7684\u5206\u6790API'\r\n  }, { status: 404, headers: corsHeaders });\r\n}\r\n\r\n// \u751F\u6210\u6A21\u62DF\u5E93\u5B58\u6570\u636E\r\nfunction generateMockInventoryData() {\r\n  const products = ['iPhone 15', 'Samsung Galaxy S24', 'iPad Pro', 'MacBook Air', 'AirPods Pro'];\r\n  const categories = ['\u624B\u673A', '\u5E73\u677F', '\u7B14\u8BB0\u672C', '\u914D\u4EF6'];\r\n  const suppliers = ['\u4F9B\u5E94\u5546A', '\u4F9B\u5E94\u5546B', '\u4F9B\u5E94\u5546C'];\r\n  \r\n  const data = [];\r\n  for (let i = 1; i <= 100; i++) {\r\n    data.push({\r\n      id: i,\r\n      sku: `SKU${String(i).padStart(6, '0')}`,\r\n      productName: products[Math.floor(Math.random() * products.length)],\r\n      category: categories[Math.floor(Math.random() * categories.length)],\r\n      supplier: suppliers[Math.floor(Math.random() * suppliers.length)],\r\n      stock: Math.floor(Math.random() * 1000) + 10,\r\n      price: (Math.random() * 5000 + 500).toFixed(2),\r\n      cost: (Math.random() * 3000 + 300).toFixed(2),\r\n      lastUpdate: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString(),\r\n      status: Math.random() > 0.1 ? '\u6B63\u5E38' : '\u7F3A\u8D27'\r\n    });\r\n  }\r\n  return data;\r\n}\r\n\r\n// \u8BA1\u7B97\u5E93\u5B58\u6C47\u603B\r\nfunction calculateInventorySummary(data) {\r\n  const totalProducts = data.length;\r\n  const totalStock = data.reduce((sum, item) => sum + item.stock, 0);\r\n  const totalValue = data.reduce((sum, item) => sum + (item.stock * parseFloat(item.price)), 0);\r\n  const lowStockItems = data.filter(item => item.stock < 50).length;\r\n  const outOfStockItems = data.filter(item => item.status === '\u7F3A\u8D27').length;\r\n  \r\n  return {\r\n    totalProducts,\r\n    totalStock,\r\n    totalValue: totalValue.toFixed(2),\r\n    lowStockItems,\r\n    outOfStockItems,\r\n    categories: [...new Set(data.map(item => item.category))].length\r\n  };\r\n}\r\n\r\n// \u751F\u6210\u9500\u552E\u5206\u6790\u6570\u636E\r\nfunction generateSalesAnalysis() {\r\n  const months = ['1\u6708', '2\u6708', '3\u6708', '4\u6708', '5\u6708', '6\u6708'];\r\n  const salesData = months.map(month => ({\r\n    month,\r\n    sales: Math.floor(Math.random() * 1000000) + 500000,\r\n    orders: Math.floor(Math.random() * 5000) + 1000,\r\n    avgOrderValue: (Math.random() * 500 + 200).toFixed(2)\r\n  }));\r\n  \r\n  return {\r\n    monthlySales: salesData,\r\n    totalSales: salesData.reduce((sum, item) => sum + item.sales, 0),\r\n    totalOrders: salesData.reduce((sum, item) => sum + item.orders, 0),\r\n    growthRate: ((Math.random() * 40 - 10).toFixed(1)) + '%'\r\n  };\r\n}\r\n\r\n// \u751F\u6210\u8D8B\u52BF\u5206\u6790\u6570\u636E\r\nfunction generateTrendsAnalysis() {\r\n  const categories = ['\u624B\u673A', '\u5E73\u677F', '\u7B14\u8BB0\u672C', '\u914D\u4EF6'];\r\n  const trends = categories.map(category => ({\r\n    category,\r\n    trend: Math.random() > 0.5 ? '\u4E0A\u5347' : '\u4E0B\u964D',\r\n    percentage: (Math.random() * 30).toFixed(1),\r\n    recommendation: Math.random() > 0.5 ? '\u589E\u52A0\u5E93\u5B58' : '\u51CF\u5C11\u8BA2\u8D2D'\r\n  }));\r\n  \r\n  return {\r\n    categoryTrends: trends,\r\n    hotProducts: ['iPhone 15', 'MacBook Air', 'AirPods Pro'],\r\n    seasonalForecast: '\u9884\u8BA1\u4E0B\u5B63\u5EA6\u9500\u91CF\u589E\u957F15%'\r\n  };\r\n}\r\n\r\n// \u7B80\u5355\u7684Excel\u6570\u636E\u89E3\u6790\uFF08\u6A21\u62DF\u89E3\u6790Excel\u5185\u5BB9\uFF09\r\nfunction parseExcelData(arrayBuffer) {\r\n  // \u5728\u5B9E\u9645\u73AF\u5883\u4E2D\uFF0C\u8FD9\u91CC\u5E94\u8BE5\u4F7F\u7528XLSX.js\u7B49\u5E93\u6765\u89E3\u6790Excel\r\n  // \u73B0\u5728\u6211\u4EEC\u751F\u6210\u6A21\u62DF\u7684SKU\u5E93\u5B58\u6570\u636E\uFF0C\u6309\u7167\u60A8\u9875\u9762\u4E2D\u663E\u793A\u7684\u683C\u5F0F\r\n  const mockData = [];\r\n  \r\n  for (let i = 1; i <= 100; i++) {\r\n    mockData.push({\r\n      SKU: `SKU${String(i).padStart(6, '0')}`,\r\n      \u5546\u54C1\u540D\u79F0: `\u5546\u54C1${i}`,\r\n      \u6700\u65B0\u5E93\u5B58: Math.floor(Math.random() * 1000) + 10,\r\n      \u52A8\u6001\u5E93\u5B58: Math.floor(Math.random() * 1000) + 10,\r\n      \u9500\u552E\u6570\u91CF: Math.floor(Math.random() * 50),\r\n      \u5355\u4EF7: (Math.random() * 1000 + 100).toFixed(2),\r\n      \u6210\u672C: (Math.random() * 500 + 50).toFixed(2),\r\n      \u5206\u7C7B: ['\u624B\u673A', '\u5E73\u677F', '\u7B14\u8BB0\u672C', '\u914D\u4EF6'][Math.floor(Math.random() * 4)],\r\n      \u4F9B\u5E94\u5546: ['\u4F9B\u5E94\u5546A', '\u4F9B\u5E94\u5546B', '\u4F9B\u5E94\u5546C'][Math.floor(Math.random() * 3)],\r\n      \u72B6\u6001: Math.random() > 0.1 ? '\u6B63\u5E38' : '\u7F3A\u8D27',\r\n      \u6700\u540E\u66F4\u65B0: new Date().toISOString()\r\n    });\r\n  }\r\n  \r\n  return mockData;\r\n}\r\n\r\n// \u83B7\u53D6\u6587\u4EF6\u6269\u5C55\u540D\r\nfunction getFileExtension(fileName) {\r\n  const lastDot = fileName.lastIndexOf('.');\r\n  return lastDot !== -1 ? fileName.substring(lastDot + 1) : 'xlsx';\r\n}\r\n\r\n// \u5904\u7406\u672C\u5730\u6570\u636E\u5E93API\u8BF7\u6C42\r\nasync function handleLocalDB(request, env, path, method, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406\u672C\u5730\u6570\u636E\u5E93\u8BF7\u6C42:', path);\r\n  \r\n  try {\r\n    // \u5BBD\u8868\u76F8\u5173API\r\n    if (path === '/api/localdb/wide' && method === 'GET') {\r\n      // \u8FD4\u56DE\u5BBD\u8868\u6570\u636E\uFF1A\u4F18\u5148\u5185\u5B58\uFF1B\u82E5\u4E3A\u7A7A\u5219\u5C1D\u8BD5\u4ECER2\u8BFB\u53D6\u5E76\u7F13\u5B58\r\n      let data = Array.isArray(wideTableCache) ? wideTableCache : [];\r\n      if ((!data || data.length === 0) && env.R2_BUCKET) {\r\n        try {\r\n          const obj = await env.R2_BUCKET.get(WIDE_TABLE_R2_KEY);\r\n          if (obj) {\r\n            const text = await obj.text();\r\n            const parsed = JSON.parse(text);\r\n            if (Array.isArray(parsed)) {\r\n              wideTableCache = parsed;\r\n              data = parsed;\r\n            }\r\n          }\r\n        } catch (e) { console.warn('\u8BFB\u53D6R2\u5BBD\u8868\u5931\u8D25:', e); }\r\n      }\r\n      await archiveOldDatesToRecords(env, 5);\r\n      data = wideTableCache;\r\n      // \u8BFB\u53D6\u540E\u8BA1\u7B97\u9500\u91CF\u5217\uFF08\u4E0D\u5F52\u6863\uFF0C\u907F\u514D\u7834\u574F\u524D\u7AEF\u5217\u7ED3\u6784\uFF09\r\n      wideTableCache = computeSalesForWideTableRows(wideTableCache);\r\n      data = wideTableCache;\r\n      return Response.json({ success: true, data, total: data.length }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/wide' && method === 'POST') {\r\n      // \u4FDD\u5B58\u5BBD\u8868\u6570\u636E\r\n      const requestData = await request.json();\r\n      console.log('\uD83D\uDCBE \u4FDD\u5B58\u5BBD\u8868\u6570\u636E:', requestData);\r\n      if (requestData && Array.isArray(requestData.data)) {\r\n        wideTableCache = requestData.data;\r\n      }\r\n      return Response.json({\r\n        success: true,\r\n        message: '\u5BBD\u8868\u6570\u636E\u4FDD\u5B58\u6210\u529F',\r\n        data: requestData\r\n      }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/wide/export' && method === 'GET') {\r\n      // \u5BFC\u51FA\u5BBD\u8868\u6570\u636E\uFF1A\u4EC5\u5BFC\u51FA\u771F\u5B9E\u6570\u636E\uFF0C\u5FC5\u8981\u65F6\u4ECER2\u56DE\u586B\r\n      let data = Array.isArray(wideTableCache) ? wideTableCache : [];\r\n      if ((!data || data.length === 0) && env.R2_BUCKET) {\r\n        try {\r\n          const obj = await env.R2_BUCKET.get(WIDE_TABLE_R2_KEY);\r\n          if (obj) {\r\n            const text = await obj.text();\r\n            const parsed = JSON.parse(text);\r\n            if (Array.isArray(parsed)) {\r\n              wideTableCache = parsed;\r\n              data = parsed;\r\n            }\r\n          }\r\n        } catch (e) { console.warn('\u8BFB\u53D6R2\u5BBD\u8868\u5931\u8D25:', e); }\r\n      }\r\n      return Response.json({ success: true, data, message: '\u5BBD\u8868\u6570\u636E\u5BFC\u51FA\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/wide/batch' && method === 'POST') {\r\n      // \u6279\u91CF\u4E0A\u4F20\u5904\u7406 - \u652F\u6301\u6587\u4EF6\u4E0A\u4F20\u548CJSON\u6570\u636E\r\n      try {\r\n        const contentType = request.headers.get('content-type') || '';\r\n        \r\n        if (contentType.includes('multipart/form-data')) {\r\n          // \u5904\u7406\u6587\u4EF6\u76F4\u4F20\uFF1A\u5F53\u524D\u4E0D\u5728\u670D\u52A1\u7AEF\u89E3\u6790Excel\uFF0C\u63D0\u793A\u524D\u7AEF\u6539\u4E3AJSON\u4E0A\u4F20\r\n          const formData = await request.formData();\r\n          const file = formData.get('file');\r\n          if (!file) {\r\n            return Response.json({ success: false, error: '\u6CA1\u6709\u4E0A\u4F20\u6587\u4EF6' }, { headers: corsHeaders });\r\n          }\r\n          console.log('\uD83D\uDCE4 \u6536\u5230Excel\u6587\u4EF6\u76F4\u4F20(\u4E0D\u89E3\u6790):', file.name);\r\n          return Response.json({ success: true, message: `\u6587\u4EF6 ${file.name} \u5DF2\u63A5\u6536\uFF1B\u8BF7\u5728\u524D\u7AEF\u89E3\u6790\u540E\u4EE5JSON\u63D0\u4EA4`, processed: 0, data: [] }, { headers: corsHeaders });\r\n          \r\n        } else {\r\n          // \u5904\u7406JSON\u6570\u636E\r\n          const requestData = await request.json();\r\n          console.log('\uD83D\uDCE4 \u6279\u91CFJSON\u6570\u636E:', requestData);\r\n          if (requestData && Array.isArray(requestData.data)) {\r\n            wideTableCache = requestData.data;\r\n            // \u8BA1\u7B97\u9500\u91CF\u5E76\u6301\u4E45\u5316\u5230R2\r\n            wideTableCache = computeSalesForWideTableRows(wideTableCache);\r\n            if (env.R2_BUCKET) {\r\n              try {\r\n                await env.R2_BUCKET.put(WIDE_TABLE_R2_KEY, JSON.stringify(wideTableCache), {\r\n                  httpMetadata: { contentType: 'application/json' },\r\n                  customMetadata: { updatedAt: new Date().toISOString() }\r\n                });\r\n              } catch (e) { console.warn('\u5199\u5165R2\u5BBD\u8868\u5931\u8D25:', e); }\r\n            }\r\n            // \u4E0D\u81EA\u52A8\u5F52\u6863\uFF0C\u4FDD\u6301\u5217\u7ED3\u6784\u4E0D\u53D8\r\n          }\r\n          \r\n          return Response.json({ success: true, message: '\u6279\u91CF\u6570\u636E\u4E0A\u4F20\u6210\u529F', processed: requestData.data ? requestData.data.length : 0, data: Array.isArray(wideTableCache) ? wideTableCache : [] }, { headers: corsHeaders });\r\n        }\r\n        \r\n      } catch (parseError) {\r\n        console.error('\u6279\u91CF\u4E0A\u4F20\u89E3\u6790\u9519\u8BEF:', parseError);\r\n        return Response.json({\r\n          success: false,\r\n          error: `\u6570\u636E\u89E3\u6790\u5931\u8D25: ${parseError.message}`\r\n        }, { \r\n          status: 400,\r\n          headers: corsHeaders \r\n        });\r\n      }\r\n    }\r\n    \r\n    else if (path === '/api/localdb/wide/clear-all' && (method === 'POST' || method === 'GET')) {\r\n      // \u6E05\u7A7A\u7F13\u5B58\u5E76\u8FD4\u56DE\u6210\u529F\uFF1B\u652F\u6301 POST/GET \u65B9\u4FBF\u6D4F\u89C8\u5668\u76F4\u63A5\u9A8C\u8BC1\r\n      wideTableCache = [];\r\n      if (env.R2_BUCKET) {\r\n        try { await env.R2_BUCKET.delete(WIDE_TABLE_R2_KEY); } catch (e) { console.warn('\u5220\u9664R2\u5BBD\u8868\u5931\u8D25:', e); }\r\n      }\r\n      return Response.json({ success: true, message: '\u6210\u529F\u6E05\u7A7A\u6240\u6709\u5BBD\u8868\u6570\u636E' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    // \u8BB0\u5F55\u76F8\u5173API\r\n    else if (path === '/api/localdb/records' && method === 'GET') {\r\n      // \u8FD4\u56DE\u8BB0\u5F55\u5217\u8868\uFF1A\u5185\u5B58\u4F18\u5148\uFF0C\u5176\u6B21R2\r\n      let data = Array.isArray(recordsCache) ? recordsCache : [];\r\n      if ((!data || data.length === 0) && env.R2_BUCKET) {\r\n        try { const obj = await env.R2_BUCKET.get(RECORDS_R2_KEY); if (obj) { const text = await obj.text(); const parsed = JSON.parse(text); if (Array.isArray(parsed)) { recordsCache = parsed; data = parsed; } } } catch(e){ console.warn('\u8BFB\u53D6R2\u8BB0\u5F55\u5931\u8D25:', e); }\r\n      }\r\n      return Response.json({ success: true, data, total: data.length }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/records' && method === 'POST') {\r\n      // \u6DFB\u52A0\u8BB0\u5F55\uFF08JSON\uFF09\r\n      const requestData = await request.json();\r\n      console.log('\u2795 \u6DFB\u52A0\u8BB0\u5F55:', requestData);\r\n      const record = { ...requestData, id: Date.now() };\r\n      if (!Array.isArray(recordsCache)) recordsCache = [];\r\n      recordsCache.unshift(record);\r\n      if (env.R2_BUCKET) { try { await env.R2_BUCKET.put(RECORDS_R2_KEY, JSON.stringify(recordsCache), { httpMetadata: { contentType: 'application/json' } }); } catch(e){ console.warn('\u5199\u5165R2\u8BB0\u5F55\u5931\u8D25:', e);} }\r\n      return Response.json({ success: true, message: '\u8BB0\u5F55\u6DFB\u52A0\u6210\u529F', data: record }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path.startsWith('/api/localdb/records/') && method === 'PUT') {\r\n      // \u66F4\u65B0\u8BB0\u5F55\r\n      const recordId = path.split('/').pop();\r\n      const requestData = await request.json();\r\n      console.log('\u270F\uFE0F \u66F4\u65B0\u8BB0\u5F55:', recordId, requestData);\r\n      if (Array.isArray(recordsCache)) {\r\n        const idx = recordsCache.findIndex(r => String(r.id) === String(recordId));\r\n        if (idx !== -1) { recordsCache[idx] = { ...recordsCache[idx], ...requestData, id: recordsCache[idx].id }; }\r\n      }\r\n      if (env.R2_BUCKET) { try { await env.R2_BUCKET.put(RECORDS_R2_KEY, JSON.stringify(recordsCache), { httpMetadata: { contentType: 'application/json' } }); } catch(e){ console.warn('\u5199\u5165R2\u8BB0\u5F55\u5931\u8D25:', e);} }\r\n      return Response.json({ success: true, message: '\u8BB0\u5F55\u66F4\u65B0\u6210\u529F', data: { ...requestData, id: recordId } }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path.startsWith('/api/localdb/records/') && method === 'DELETE') {\r\n      // \u5220\u9664\u8BB0\u5F55\r\n      const recordId = path.split('/').pop();\r\n      console.log('\uD83D\uDDD1\uFE0F \u5220\u9664\u8BB0\u5F55:', recordId);\r\n      if (Array.isArray(recordsCache)) recordsCache = recordsCache.filter(r => String(r.id) !== String(recordId));\r\n      if (env.R2_BUCKET) { try { await env.R2_BUCKET.put(RECORDS_R2_KEY, JSON.stringify(recordsCache), { httpMetadata: { contentType: 'application/json' } }); } catch(e){ console.warn('\u5199\u5165R2\u8BB0\u5F55\u5931\u8D25:', e);} }\r\n      return Response.json({ success: true, message: '\u8BB0\u5F55\u5220\u9664\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/records/batch' && method === 'POST') {\r\n      // \u6279\u91CF\u5BFC\u5165\u8BB0\u5F55\uFF08JSON\u4F18\u5148\uFF1Bmultipart\u4EC5\u63D0\u793A\uFF09\r\n      const contentType = request.headers.get('content-type') || '';\r\n      if (contentType.includes('multipart/form-data')) {\r\n        return Response.json({ success: true, message: '\u6587\u4EF6\u5DF2\u63A5\u6536\uFF1B\u8BF7\u524D\u7AEF\u89E3\u6790\u6210JSON\u540E\u63D0\u4EA4' }, { headers: corsHeaders });\r\n      }\r\n      const requestData = await request.json();\r\n      console.log('\uD83D\uDCE4 \u6279\u91CF\u5BFC\u5165\u8BB0\u5F55(JSON):', requestData);\r\n      if (requestData && Array.isArray(requestData.data)) {\r\n        if (!Array.isArray(recordsCache)) recordsCache = [];\r\n        // \u751F\u6210id\u5E76\u63D2\u5165\u5230\u5934\u90E8\r\n        const now = Date.now();\r\n        const withIds = requestData.data.map((r, i) => ({ id: now + i, ...r }));\r\n        recordsCache = [...withIds, ...recordsCache];\r\n        if (env.R2_BUCKET) { try { await env.R2_BUCKET.put(RECORDS_R2_KEY, JSON.stringify(recordsCache), { httpMetadata: { contentType: 'application/json' } }); } catch(e){ console.warn('\u5199\u5165R2\u8BB0\u5F55\u5931\u8D25:', e);} }\r\n        return Response.json({ success: true, message: '\u6279\u91CF\u8BB0\u5F55\u5BFC\u5165\u6210\u529F', processed: withIds.length }, { headers: corsHeaders });\r\n      }\r\n      return Response.json({ success: false, error: '\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/records/export' && method === 'GET') {\r\n      // \u5BFC\u51FA\u8BB0\u5F55\u6570\u636E\uFF08\u771F\u5B9E\uFF09\r\n      let data = Array.isArray(recordsCache) ? recordsCache : [];\r\n      if ((!data || data.length === 0) && env.R2_BUCKET) {\r\n        try { const obj = await env.R2_BUCKET.get(RECORDS_R2_KEY); if (obj) { const text = await obj.text(); const parsed = JSON.parse(text); if (Array.isArray(parsed)) { recordsCache = parsed; data = parsed; } } } catch(e){ console.warn('\u8BFB\u53D6R2\u8BB0\u5F55\u5931\u8D25:', e); }\r\n      }\r\n      return Response.json({ success: true, data, message: '\u8BB0\u5F55\u6570\u636E\u5BFC\u51FA\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else if (path === '/api/localdb/records/clear-all' && (method === 'POST' || method === 'GET')) {\r\n      recordsCache = [];\r\n      if (env.R2_BUCKET) { try { await env.R2_BUCKET.delete(RECORDS_R2_KEY); } catch(e){ console.warn('\u5220\u9664R2\u8BB0\u5F55\u5931\u8D25:', e);} }\r\n      return Response.json({ success: true, message: '\u6210\u529F\u6E05\u7A7A\u6240\u6709\u8BB0\u5F55\u6570\u636E' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    else {\r\n      return new Response('Not Found', { status: 404, headers: corsHeaders });\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('\u274C LocalDB API\u9519\u8BEF:', error);\r\n    return Response.json({\r\n      success: false,\r\n      error: error.message\r\n    }, { \r\n      status: 500,\r\n      headers: corsHeaders \r\n    });\r\n  }\r\n}\r\n\r\n// \u751F\u6210\u6A21\u62DF\u5BBD\u8868\u6570\u636E\r\nfunction generateMockWideData() {\r\n  const data = [];\r\n  const now = Date.now();\r\n  const format = (d) => {\r\n    const pad = (n) => String(n).padStart(2, '0');\r\n    const dt = new Date(d);\r\n    return `${dt.getFullYear()}/${pad(dt.getMonth()+1)}/${pad(dt.getDate())} ${pad(dt.getHours())}:${pad(dt.getMinutes())}:${pad(dt.getSeconds())}`;\r\n  };\r\n  for (let i = 1; i <= 50; i++) {\r\n    data.push({\r\n      '\u7CFB\u7EDF\u5C65\u7EA6\u5355\u53F7': `${Date.now()}${String(i).padStart(4,'0')}`,\r\n      '\u5E97\u94FA\u8BA2\u5355\u65F6\u95F4': format(now - i * 1234567),\r\n      'SKU': `X${String(774305 + i).padStart(6,'0')}NA`,\r\n      '\u5546\u54C1\u6570\u91CF': 1\r\n    });\r\n  }\r\n  return data;\r\n}\r\n\r\n// \u751F\u6210\u6A21\u62DF\u8BB0\u5F55\u6570\u636E\r\nfunction generateMockRecords() {\r\n  const records = [];\r\n  \r\n  for (let i = 1; i <= 20; i++) {\r\n    records.push({\r\n      id: i,\r\n      fileName: `Excel\u6570\u636E\u8868${i}.xlsx`,\r\n      uploadTime: new Date(Date.now() - Math.random() * 10 * 24 * 60 * 60 * 1000).toISOString(),\r\n      recordCount: Math.floor(Math.random() * 500) + 100,\r\n      status: Math.random() > 0.1 ? '\u5DF2\u5904\u7406' : '\u5904\u7406\u4E2D',\r\n      description: `\u6279\u6B21${i}\u7684\u5E93\u5B58\u6570\u636E\u5BFC\u5165`\r\n    });\r\n  }\r\n  \r\n  return records.sort((a, b) => new Date(b.uploadTime) - new Date(a.uploadTime));\r\n}\r\n\r\n// \u4E0B\u8F7D\u6587\u4EF6\uFF1A\u5C06 R2 \u5BF9\u8C61\u6D41\u5F0F\u8FD4\u56DE\r\nasync function handleFileDownload(request, env, path, corsHeaders) {\r\n  try {\r\n    const id = path.split('/')[3];\r\n    // \u7531\u4E8E\u5F53\u524D\u6587\u4EF6\u5217\u8868\u6CA1\u6709\u4FDD\u5B58 id->key \u7684\u6620\u5C04\uFF0C\u4F7F\u7528\u7EA6\u5B9A\uFF1Aid \u4E3A\u65F6\u95F4\u6233\u524D\u7F00\uFF0C\u5339\u914D arc/ \u524D\u7F00\u4E0B\u5305\u542B\u8BE5\u524D\u7F00\u7684\u5BF9\u8C61\r\n    if (!env.R2_BUCKET) throw new Error('R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528');\r\n    const list = await env.R2_BUCKET.list({ prefix: 'arc/' });\r\n    const match = list.objects.find(o => o.key.includes(id));\r\n    if (!match) {\r\n      return Response.json({ success: false, error: '\u6587\u4EF6\u4E0D\u5B58\u5728' }, { status: 404, headers: corsHeaders });\r\n    }\r\n    const obj = await env.R2_BUCKET.get(match.key);\r\n    if (!obj) {\r\n      return Response.json({ success: false, error: '\u6587\u4EF6\u4E0D\u5B58\u5728' }, { status: 404, headers: corsHeaders });\r\n    }\r\n    const headers = new Headers(corsHeaders);\r\n    headers.set('Content-Type', obj.httpMetadata?.contentType || 'application/octet-stream');\r\n    headers.set('Content-Disposition', `attachment; filename=\"${(obj.customMetadata?.originalName)||'download.xlsx'}\"`);\r\n    return new Response(obj.body, { headers });\r\n  } catch (error) {\r\n    console.error('\u4E0B\u8F7D\u5931\u8D25:', error);\r\n    return Response.json({ success: false, error: error.message }, { status: 500, headers: corsHeaders });\r\n  }\r\n}\r\n\r\n// \u89E3\u6790/\u9884\u89C8\u6587\u4EF6\uFF1A\u8FD4\u56DE\u6A21\u62DF\u7684\u5206\u9875\u4E0E\u8868\u5934\u6570\u636E\uFF08\u5360\u4F4D\u5B9E\u73B0\uFF09\r\nasync function handleFileAnalyze(request, env, path, corsHeaders) {\r\n  try {\r\n    const url = new URL(request.url);\r\n    const id = path.split('/')[3];\r\n    const sheet = url.searchParams.get('sheet') || 'Sheet1';\r\n    const page = parseInt(url.searchParams.get('page')||'1');\r\n    const limit = parseInt(url.searchParams.get('limit')||'20');\r\n\r\n    // \u751F\u6210\u6A21\u62DF\u6570\u636E\uFF08\u540E\u7EED\u53EF\u6539\u4E3A\u4ECE R2 \u8BFB\u53D6\u5E76\u7528 XLSX \u89E3\u6790\uFF09\r\n    const headers = ['SKU','\u5217A','\u5217B','\u5217C','\u5217D','\u5217E'];\r\n    const rowsTotal = 150;\r\n    const allRows = Array.from({length: rowsTotal}, (_,i)=>[\r\n      `SKU${String(i+1).padStart(6,'0')}`,'A'+(i+1),'B'+(i+1),'C'+(i+1),'D'+(i+1),'E'+(i+1)\r\n    ]);\r\n    const start = (page-1)*limit;\r\n    const data = allRows.slice(start, start+limit);\r\n\r\n    // \u7B80\u5355\u6A21\u62DF\u6240\u6709\u5DE5\u4F5C\u8868\u4FE1\u606F\r\n    const allSheets = [\r\n      { name:'Sheet1', rowCount: rowsTotal, colCount: headers.length, headers: headers.slice(0,6) },\r\n      { name:'Sheet2', rowCount: 0, colCount: 0, headers: [] }\r\n    ];\r\n\r\n    return Response.json({\r\n      success: true,\r\n      analysis: {\r\n        fileName: `\u6587\u4EF6_${id}.xlsx`,\r\n        currentSheet: sheet,\r\n        allSheets,\r\n        headers,\r\n        data,\r\n        pagination: {\r\n          currentPage: page,\r\n          totalPages: Math.ceil(rowsTotal/limit),\r\n          totalRows: rowsTotal,\r\n          limit,\r\n          hasNext: page*limit<rowsTotal,\r\n          hasPrev: page>1\r\n        },\r\n        summary: {\r\n          uploadTime: new Date().toISOString(),\r\n          fileSize: 1024*1024,\r\n          uploadedBy: 'admin',\r\n          totalSheets: allSheets.length\r\n        },\r\n        performance: { processingTime: 5 }\r\n      }\r\n    }, { headers: corsHeaders });\r\n  } catch (error) {\r\n    console.error('\u5206\u6790\u5931\u8D25:', error);\r\n    return Response.json({ success:false, error: error.message }, { status: 500, headers: corsHeaders });\r\n  }\r\n}\r\n\r\n// \u5904\u7406\u6253\u5305\u7CFB\u7EDF\u7684R2\u8DEF\u7531\uFF08/api/r2/*\uFF09\r\nasync function handleR2Routes(request, env, path, method, corsHeaders) {\r\n  try {\r\n    // \u4E0A\u4F20\uFF1A/api/r2/upload/package/<path>\r\n    if (path.startsWith('/api/r2/upload/package/') && method === 'POST') {\r\n      const targetPath = decodeURIComponent(path.replace('/api/r2/upload/package/', ''));\r\n      const formData = await request.formData();\r\n      const file = formData.get('file');\r\n      if (!file) {\r\n        return Response.json({ success: false, error: '\u6CA1\u6709\u4E0A\u4F20\u6587\u4EF6' }, { headers: corsHeaders });\r\n      }\r\n      const r2Key = `package/${targetPath}`;\r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      await env.R2_BUCKET.put(r2Key, file.stream(), {\r\n        httpMetadata: { contentType: file.type || 'application/octet-stream' },\r\n        customMetadata: {\r\n          originalName: file.name,\r\n          uploadTime: new Date().toISOString()\r\n        }\r\n      });\r\n      return Response.json({ success: true, message: '\u4E0A\u4F20\u6210\u529F', filePath: r2Key, size: file.size || 0 }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u5217\u8868\uFF1A/api/r2/list-files?folder=package&prefix=...&limit=...\r\n    if (path === '/api/r2/list-files' && method === 'GET') {\r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      const url = new URL(request.url);\r\n      const folder = url.searchParams.get('folder') || '';\r\n      const prefix = url.searchParams.get('prefix') || '';\r\n      const limit = parseInt(url.searchParams.get('limit') || '100');\r\n      const keyPrefix = folder ? `${folder}/${prefix || ''}` : prefix;\r\n      const res = await env.R2_BUCKET.list({ prefix: keyPrefix, limit });\r\n      return Response.json({ success: true, files: res.objects || [] }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u5220\u9664\uFF1A/api/r2/delete/<path>\r\n    if (path.startsWith('/api/r2/delete/') && method === 'DELETE') {\r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      const targetPath = decodeURIComponent(path.replace('/api/r2/delete/', ''));\r\n      await env.R2_BUCKET.delete(targetPath);\r\n      return Response.json({ success: true, message: '\u5220\u9664\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n\r\n    // \u516C\u5171URL\uFF1A/api/r2/public-url/<filename>?folder=package\r\n    if (path.startsWith('/api/r2/public-url/') && method === 'GET') {\r\n      const url = new URL(request.url);\r\n      const folder = url.searchParams.get('folder') || '';\r\n      const fileName = decodeURIComponent(path.replace('/api/r2/public-url/', ''));\r\n      const key = folder ? `${folder}/${fileName}` : fileName;\r\n      const publicUrl = `https://23441d4f7734b84186c4c20ddefef8e7.r2.cloudflarestorage.com/century-business-system/${key}`;\r\n      return Response.json({ success: true, url: publicUrl }, { headers: corsHeaders });\r\n    }\r\n\r\n    return Response.json({ success: false, error: '\u4E0D\u652F\u6301\u7684R2\u8DEF\u7531' }, { status: 404, headers: corsHeaders });\r\n  } catch (error) {\r\n    console.error('R2\u8DEF\u7531\u9519\u8BEF:', error);\r\n    return Response.json({ success: false, error: error.message }, { status: 500, headers: corsHeaders });\r\n  }\r\n}\r\n\r\n// \u5904\u7406\u5929\u732B\u8BA2\u5355API\u8BF7\u6C42 - \u6620\u5C04\u5230localdb\u529F\u80FD\r\nasync function handleTmallOrders(request, env, path, method, corsHeaders) {\r\n  console.log('\uD83D\uDD04 \u5904\u7406\u5929\u732B\u8BA2\u5355\u8BF7\u6C42:', path);\r\n  \r\n  try {\r\n    // \u6062\u590D\uFF1A\u5C06 tmall-orders \u8DEF\u5F84\u7B80\u5355\u6620\u5C04\u5230 localdb\uFF08\u4E0E\u4E4B\u524D\u53EF\u6B63\u5E38\u663E\u793A\u5206\u6790\u56FE\u8868\u7684\u884C\u4E3A\u4E00\u81F4\uFF09\r\n    let mappedPath = path.replace('/api/tmall-orders/', '/api/localdb/');\r\n    \r\n    // \u7279\u6B8A\u8DEF\u5F84\u6620\u5C04\r\n    if (path.endsWith('/smart-import')) {\r\n      mappedPath = '/api/localdb/wide/batch';\r\n    } else if (path.endsWith('/wide/clear-all')) {\r\n      // \u660E\u786E\u5904\u7406 clear-all\uFF0C\u907F\u514D\u5C06 \"clear-all\" \u518D\u6B21\u66FF\u6362\u6210 \"clear-all-all\"\r\n      mappedPath = '/api/localdb/wide/clear-all';\r\n    } else if (path.endsWith('/wide/clear')) {\r\n      mappedPath = '/api/localdb/wide/clear-all';\r\n    }\r\n    \r\n    console.log(`\uD83D\uDCCD \u8DEF\u5F84\u6620\u5C04: ${path} \u2192 ${mappedPath}`);\r\n    \r\n    // \u8C03\u7528\u73B0\u6709\u7684localdb\u5904\u7406\u51FD\u6570\r\n    return await handleLocalDB(request, env, mappedPath, method, corsHeaders);\r\n    \r\n  } catch (error) {\r\n    console.error('\u274C \u5929\u732B\u8BA2\u5355API\u9519\u8BEF:', error);\r\n    return Response.json({\r\n      success: false,\r\n      error: error.message\r\n    }, { \r\n      status: 500,\r\n      headers: corsHeaders \r\n    });\r\n  }\r\n}\r\n\r\n// \u5904\u7406\u6253\u5305\u7CFB\u7EDF\u6570\u636E\u540C\u6B65\uFF08/api/package-sync/*\uFF09\r\nasync function handlePackageSync(request, env, path, method, corsHeaders) {\r\n  try {\r\n    // \u4E0A\u4F20\u6570\u636E\u5E93\uFF1A/api/package-sync/database\r\n    if (path === '/api/package-sync/database' && method === 'POST') {\r\n      const data = await request.json();\r\n      const key = 'package-sync/database.json';\r\n      \r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      \r\n      // \u4FDD\u5B58\u5230R2\r\n      await env.R2_BUCKET.put(key, JSON.stringify({\r\n        ...data,\r\n        lastSync: new Date().toISOString()\r\n      }), {\r\n        httpMetadata: { contentType: 'application/json' }\r\n      });\r\n      \r\n      return Response.json({ success: true, message: '\u6570\u636E\u5E93\u540C\u6B65\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    // \u4E0B\u8F7D\u6570\u636E\u5E93\uFF1A/api/package-sync/database\r\n    if (path === '/api/package-sync/database' && method === 'GET') {\r\n      const key = 'package-sync/database.json';\r\n      \r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      \r\n      const object = await env.R2_BUCKET.get(key);\r\n      if (!object) {\r\n        return Response.json({ success: false, data: null, message: '\u6682\u65E0\u540C\u6B65\u6570\u636E' }, { headers: corsHeaders });\r\n      }\r\n      \r\n      const data = await object.json();\r\n      return Response.json({ success: true, data }, { headers: corsHeaders });\r\n    }\r\n    \r\n    // \u4E0A\u4F20\u6587\u4EF6\u6CE8\u518C\u8868\uFF1A/api/package-sync/files\r\n    if (path === '/api/package-sync/files' && method === 'POST') {\r\n      const data = await request.json();\r\n      const key = 'package-sync/files.json';\r\n      \r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      \r\n      // \u4FDD\u5B58\u5230R2\r\n      await env.R2_BUCKET.put(key, JSON.stringify({\r\n        ...data,\r\n        lastSync: new Date().toISOString()\r\n      }), {\r\n        httpMetadata: { contentType: 'application/json' }\r\n      });\r\n      \r\n      return Response.json({ success: true, message: '\u6587\u4EF6\u6CE8\u518C\u8868\u540C\u6B65\u6210\u529F' }, { headers: corsHeaders });\r\n    }\r\n    \r\n    // \u4E0B\u8F7D\u6587\u4EF6\u6CE8\u518C\u8868\uFF1A/api/package-sync/files\r\n    if (path === '/api/package-sync/files' && method === 'GET') {\r\n      const key = 'package-sync/files.json';\r\n      \r\n      if (!env.R2_BUCKET) {\r\n        return Response.json({ success: false, error: 'R2\u5B58\u50A8\u6876\u4E0D\u53EF\u7528' }, { headers: corsHeaders, status: 500 });\r\n      }\r\n      \r\n      const object = await env.R2_BUCKET.get(key);\r\n      if (!object) {\r\n        return Response.json({ success: false, data: null, message: '\u6682\u65E0\u540C\u6B65\u6570\u636E' }, { headers: corsHeaders });\r\n      }\r\n      \r\n      const data = await object.json();\r\n      return Response.json({ success: true, data }, { headers: corsHeaders });\r\n    }\r\n    \r\n    return Response.json({ success: false, error: '\u4E0D\u652F\u6301\u7684\u540C\u6B65\u64CD\u4F5C' }, { status: 404, headers: corsHeaders });\r\n  } catch (error) {\r\n    console.error('\u6570\u636E\u540C\u6B65\u5931\u8D25:', error);\r\n    return Response.json({ success: false, error: error.message }, { status: 500, headers: corsHeaders });\r\n  }\r\n}\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\xiaol\\\\Desktop\\\\layui\\\\worker.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\xiaol\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\xiaol\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\xiaol\\\\Desktop\\\\layui\\\\worker.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\xiaol\\\\Desktop\\\\layui\\\\.wrangler\\\\tmp\\\\bundle-w50aTT\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\xiaol\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\xiaol\\\\Desktop\\\\layui\\\\.wrangler\\\\tmp\\\\bundle-w50aTT\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\xiaol\\\\Desktop\\\\layui\\\\.wrangler\\\\tmp\\\\bundle-w50aTT\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
