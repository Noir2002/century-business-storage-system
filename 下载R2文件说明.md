# R2æ–‡ä»¶ä¸‹è½½å·¥å…·

è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©æ‚¨ä»Cloudflare R2å­˜å‚¨æ¡¶ä¸­ä¸‹è½½æ‰€æœ‰çš„å›¾ç‰‡å’Œè§†é¢‘æ–‡ä»¶åˆ°æœ¬åœ°ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡å’Œè§†é¢‘æ–‡ä»¶
- âœ… è·³è¿‡åº“å­˜ç³»ç»Ÿæ–‡ä»¶ï¼ˆarc/ã€package-sync/ç­‰ï¼‰
- âœ… è‡ªåŠ¨å¤„ç†é‡åæ–‡ä»¶
- âœ… æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯
- âœ… æ”¯æŒå¤šç§å›¾ç‰‡å’Œè§†é¢‘æ ¼å¼

## å®‰è£…æ­¥éª¤

1. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   npm install
   ```

2. **é…ç½®R2è¿æ¥**ï¼š
   ```bash
   npm run setup
   ```
   è¿™ä¼šåˆ›å»º `r2-config.js` æ–‡ä»¶

3. **ç¼–è¾‘é…ç½®æ–‡ä»¶**ï¼š
   æ‰“å¼€ `r2-config.js` æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„R2é…ç½®ï¼š
   ```javascript
   module.exports = {
     r2: {
       region: 'auto',
       endpoint: 'https://your-account-id.r2.cloudflarestorage.com',
       credentials: {
         accessKeyId: 'your-access-key-id',
         secretAccessKey: 'your-secret-access-key'
       }
     },
     bucketName: 'century-business-system',
     downloadDir: './2025-09-10'
   };
   ```

## ä½¿ç”¨æ–¹æ³•

è¿è¡Œä¸‹è½½å‘½ä»¤ï¼š
```bash
npm run download
```

æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
node download-r2-files-improved.js
```

## é…ç½®è¯´æ˜

### R2é…ç½®è·å–æ–¹æ³•

1. **ç™»å½•Cloudflare Dashboard**
2. **è¿›å…¥R2å¯¹è±¡å­˜å‚¨**
3. **é€‰æ‹©æ‚¨çš„å­˜å‚¨æ¡¶**
4. **ç‚¹å‡»"ç®¡ç†R2 APIä»¤ç‰Œ"**
5. **åˆ›å»ºAPIä»¤ç‰Œ**ï¼Œè·å–ï¼š
   - Access Key ID
   - Secret Access Key
   - Account IDï¼ˆç”¨äºæ„å»ºç«¯ç‚¹URLï¼‰

### ç«¯ç‚¹URLæ ¼å¼
```
https://<account-id>.r2.cloudflarestorage.com
```

## æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

### å›¾ç‰‡æ ¼å¼
- .jpg, .jpeg
- .png
- .gif
- .webp
- .bmp
- .tiff
- .svg

### è§†é¢‘æ ¼å¼
- .mp4
- .avi
- .mov
- .wmv
- .flv
- .webm
- .mkv
- .m4v

## è¾“å‡º

æ‰€æœ‰æ–‡ä»¶å°†ä¸‹è½½åˆ° `./2025-09-10/` ç›®å½•ä¸­ã€‚

å¦‚æœé‡åˆ°é‡åæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨æ·»åŠ åºå·ï¼ˆå¦‚ï¼š`image_1.jpg`ã€`image_2.jpg`ï¼‰ã€‚

## æ³¨æ„äº‹é¡¹

- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
- ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
- å¤§é‡æ–‡ä»¶ä¸‹è½½å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
- å·¥å…·ä¼šè‡ªåŠ¨è·³è¿‡åº“å­˜ç³»ç»Ÿæ–‡ä»¶ï¼Œåªä¸‹è½½å›¾ç‰‡å’Œè§†é¢‘

## æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥R2é…ç½®**ï¼šç¡®ä¿ç«¯ç‚¹URLã€è®¿é—®å¯†é’¥æ­£ç¡®
2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿èƒ½è®¿é—®Cloudflare R2
3. **æ£€æŸ¥æƒé™**ï¼šç¡®ä¿APIä»¤ç‰Œæœ‰è¯»å–æƒé™
4. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**ï¼šå·¥å…·ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## ç¤ºä¾‹è¾“å‡º

```
ğŸš€ å¼€å§‹ä¸‹è½½R2ä¸­çš„æ‰€æœ‰å›¾ç‰‡å’Œè§†é¢‘æ–‡ä»¶...
ğŸ“ ä¸‹è½½ç›®å½•: /path/to/2025-09-10
ğŸª£ å­˜å‚¨æ¡¶: century-business-system
ğŸ”— ç«¯ç‚¹: https://your-account-id.r2.cloudflarestorage.com

ğŸ“„ æ­£åœ¨å¤„ç†ç¬¬ 1 é¡µ...
   æ‰¾åˆ° 1000 ä¸ªå¯¹è±¡
âœ… ä¸‹è½½æˆåŠŸ: package/2025-09/2025-09-01/2025-09-01_0441/1756735814490_0_ny0u_IMG_4002.jpeg -> 1756735814490_0_ny0u_IMG_4002.jpeg
âœ… ä¸‹è½½æˆåŠŸ: package/2025-09/2025-09-01/2025-09-01_0441/1756735819119_1_6ytw_IMG_4003.jpeg -> 1756735819119_1_6ytw_IMG_4003.jpeg
...

ğŸ‰ ä¸‹è½½å®Œæˆ!
==================================================
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:
   æ€»æ–‡ä»¶æ•°: 135
   æˆåŠŸä¸‹è½½: 135
   ä¸‹è½½å¤±è´¥: 0
   è·³è¿‡æ–‡ä»¶: 0
   è€—æ—¶: 45 ç§’
   ä¸‹è½½ç›®å½•: /path/to/2025-09-10
==================================================
```
